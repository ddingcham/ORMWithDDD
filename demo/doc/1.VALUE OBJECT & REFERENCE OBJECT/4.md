# [Domain-Driven Design의 적용 - 1.VALUE OBJECT와 REFERENCE OBJECT 4부](http://aeternum.egloos.com/1115939)

## ENTRY POINT의 컬렉션 관리하는 방식 말고 ....  
* Customer 클래스와 분리된 별도의 클래스에 Customer 클래스의 컬렉션 관리 인터페이스를 제공하도록하는 방식  
=> REPOSITORY 활용 // 검색 매커니즘을 별도의 객체로 분리하고, EntryPoint는 단순히 검색 키만을 반환하도록  
* Customer 클래스는 이제 더 이상 save() 와 find() 같은 컬렉션 관리 메소드를 제공하지 않아도 됨  

## 도메인의 복잡성

### 0과 1의 비트들을 사용해 모든 것이 동작할 것이라는 단순한 예상과 달리,  
> 인간의 언어에 비해 표현력에 한계를 지닌 컴퓨터의 언어를 사용하기 때문에 단순할 것이라는 예상과 달리,  
> 복잡한 인간 세상을 담아내야 하기 때문에 소프트웨어는 복잡하다.

### 추상화 (Abstraction)
불필요한 군더더기를 제거하고 현재의 문제 해결에 필요한 핵심 개념만을 끌어 안음으로써,  
문제영역의 복잡성을 감속시키는 기법  

#### REFERENCE OBJECT와 VALUE OBJECT의 개념 역시 도메인 영역을 추상화 시키는 한 방법  
: 도메인 개념들의 **추적성** 및 **식별성**을 추상화하기 위한 분석 기법  
: 핵심 개념 -> 도메인의 본질적인 특성에 초점을 맞추자 !  

#### 도메인과 추상화

* 도메인에 대해 질문 해보자
  * 고객의 유일한가?
  * 고객을 유일하게 구분짓는 특성은 무엇인가?
  * 시스템은 고객의 주문 및 구매 기록을 추적하기 위해 어떤 처리를 해야 하는가?
  * 금액을 유일할 필요가 없는가?
  * 단순하게 값만 비교하면 되는가?
  
> 위의 질문들을 통해 도메인에 대한 이해를 향상시키고, 소프트웨어 전반적 복잡성을 완화  
> REFERENCE OBJECT : 시스템의 핵심 개념들의 생명 주기에 초점을 맞출 수 있다.  
> VALUE OBJECT : 도메인의 일부지만 중요하지 않은 개념들을 걸러낼 수 있다.

## 추가적인 요구사항

메모리 상에서 **추적성**과 **식별성**에 대한 관리는 어렵지 않다.
* 데이터베이스와 같은 영속성 메커니즘이 끼어드는 순간 세상은 급격하게 일그러진다.  
* 다중 사용자 지원을 위한 동시성 메커니즘이 얹어지기라도 하면,  
  REFERENCE OBJECT와 VALUET에 대한 근본적인 개념에 금이 가기 시작함  
  
단순히 언어적인 측면에서 객체를 구별하는 것을 넘어,  
인프라 스터럭쳐나 구현과 세부 구현과 관련된 문제도 함께 고려해야 한다.

